(self.webpackChunkvue=self.webpackChunkvue||[]).push([[186],{5675:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var s=i(5017),o=i(4738),a=i(1579),l=i.n(a);var r={props:{taskVisible:{type:Boolean,default:!1},isSyncContent:{type:Boolean,default:!0},syncStatus:{type:Number,default:0},netDiskFolder:{type:String,default:"请选择网盘文件夹"},synologyFolder:{type:String,default:"请选择NAS文件夹"},syncRadioData:{type:Number,default:1},stagingNetDisk:{type:Object,default:()=>({})}},data(){return{dialogVisible:!1,syncDirectionInfo:"双向同步",syncStatusInfo:0,setRequiredList:s.Yg,syncDirectionList:s.Iw,netDiskFolderName:"请选择网盘文件夹",synologyFolderName:"请选择NAS文件夹",stagingNetDiskData:{},stagingSynologyData:{},syncRadio:1,syncContent:s.S_,showSyncContent:!0,timer:null,moveEnterNasName:!1,moveEnterYDName:!1}},computed:{},watch:{taskVisible(){this.dialogVisible=this.taskVisible,this.netDiskFolderName=this.netDiskFolder,this.synologyFolderName=this.synologyFolder,this.stagingNetDiskData=this.stagingNetDisk,this.syncRadio=this.syncRadioData,this.showSyncContent=this.isSyncContent;for(const e of s.Iw)this.syncStatus===e.value&&(this.syncStatusInfo=e.value,this.syncDirectionInfo=e.label)}},filters:{},created(){},mounted(){},beforeDestroy(){},methods:{interceptPath(){if(""===this.synologyFolderName||"请选择NAS文件夹"===this.synologyFolderName)return"请选择NAS文件夹";let e="",t=l().cloneDeep(this.synologyFolderName).split("/");return-1!==t.indexOf("sdkpath")?(t.splice(1,1),e=t.join("/"),e):this.synologyFolderName},openNetDiskFolder(){this.isNetDisk=!0,this.folderModuleTitle="选择网盘文件夹",this.isOpenFolder=!0,this.newNetDiskFolder({dir:"/",web:1,order:"time",desc:1,page:1,num:50})},openSynologyFolder(){this.isNetDisk=!1,this.folderModuleTitle="选择飞牛文件夹",this.isOpenFolder=!0,this.newSynologyFolder({device_id:this.getDeviceId,path:"/",fs_id:0,start:0,limit:50})},close(){this.$emit("update:taskVisible",!1),this.$emit("close-modal"),this.clearTaskData()},confirm(){"请选择网盘文件夹"!==this.netDiskFolderName?"请选择NAS文件夹"!==this.synologyFolderName?(this.$emit("update:taskVisible",!1),this.$emit("confirm-modal",{netDiskFolder:this.netDiskFolderName,synologyFolder:this.synologyFolderName,syncDirection:this.syncStatusInfo,isNetDisk:this.isNetDisk,synologySize:this.stagingSynologyData.size,synologyFsId:this.stagingSynologyData.fs_id,netDiskSize:this.stagingNetDiskData.size,netDiskFsId:this.stagingNetDiskData.fs_id,syncRadio:this.syncRadio}),this.clearTaskData()):(0,o.y)({message:"请选择NAS文件夹",type:"warning"}):(0,o.y)({message:"请选择网盘文件夹",type:"warning"})},syncDirectionChange(e){this.syncStatusInfo=e},syncContentRadio(e){this.syncRadio=e},confirmFolder(e){if(this.clearFolderData(),e.isNetDisk)return this.isSyncContent||this.netDiskFolderName===e.path||(this.showSyncContent=!0),this.netDiskFolderName=e.path,void(this.stagingNetDiskData=e);this.isSyncContent||"请选择NAS文件夹"===this.synologyFolderName||this.synologyFolderName===e.path||(this.showSyncContent=!0),this.synologyFolderName=e.path,this.stagingSynologyData=e},clearTaskData(){this.clearFolderData(),this.netDiskFolderName="请选择网盘文件夹",this.synologyFolderName="请选择NAS文件夹",this.syncStatusInfo=0,this.syncDirectionInfo="双向同步",this.stagingSynologyData={},this.stagingNetDiskData={},this.syncRadio=1,this.showSyncContent=!0},mouseenterNasName(){"请选择NAS文件夹"!==this.synologyFolderName&&(this.timer=setTimeout((()=>{try{this.moveEnterNasName=!0}catch(e){}}),1e3))},mouseleaveNasName(){try{"请选择NAS文件夹"!==this.synologyFolderName&&(clearTimeout(this.timer),this.moveEnterNasName=!1)}catch(e){}},mouseenterPanName(){"请选择网盘文件夹"!==this.netDiskFolderName&&(this.timer=setTimeout((()=>{try{this.moveEnterYDName=!0}catch(e){}}),1e3))},mouseleavePanName(){try{"请选择网盘文件夹"!==this.netDiskFolderName&&(clearTimeout(this.timer),this.moveEnterYDName=!1)}catch(e){}}}},n=i(3723),d=i(4575),c={name:"TaskSet",mixins:[r,n.Z],components:{folderList:d.Z}},h=(0,i(1001).Z)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"task-set"},[t("div",{staticClass:"task-view"},[t("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[t("div",{staticClass:"task-set-content"},[t("div",{staticClass:"t-s-header"},[t("div",{staticClass:"t-s-header__text"},[e._v("任务设置")])]),t("div",{staticClass:"t-s-body"},[t("div",{staticClass:"select-folder"},[t("div",{staticClass:"nas-folder"},[t("div",{staticClass:"title-text"},[e._v("NAS文件夹：")]),t("div",{staticClass:"frame"},[t("div",{staticClass:"frame__text",on:{mouseenter:e.mouseenterNasName,mouseleave:e.mouseleaveNasName}},[e._v(" "+e._s(e.interceptPath())+" ")]),t("div",{staticClass:"frame__img",on:{click:e.openSynologyFolder}},[t("el-image",{attrs:{src:i(9382)}})],1),e.moveEnterNasName&&"请选择NAS文件夹"!==e.synologyFolderName?t("div",{staticClass:"float-more-name qh-folder"},[t("div",{staticClass:"float-more-name__text"},[e._v(" "+e._s(e.interceptPath())+" ")])]):e._e()])]),t("div",{staticClass:"net-disk-folder"},[t("div",{staticClass:"title-text"},[e._v("网盘文件夹：")]),t("div",{staticClass:"frame"},[t("div",{staticClass:"frame__text",on:{mouseenter:e.mouseenterPanName,mouseleave:e.mouseleavePanName}},[e._v(" "+e._s(e.netDiskFolderName)+" ")]),t("div",{staticClass:"frame__img",on:{click:e.openNetDiskFolder}},[t("el-image",{attrs:{src:i(9382)}})],1),e.moveEnterYDName&&"请选择网盘文件夹"!==e.netDiskFolderName?t("div",{staticClass:"float-more-name yd-folder"},[t("div",{staticClass:"float-more-name__text"},[e._v(" "+e._s(e.netDiskFolderName)+" ")])]):e._e()])]),t("div",{staticClass:"sync-direction"},[t("div",{staticClass:"title-text-right"},[e._v("同步方向：")]),t("el-select",{attrs:{placeholder:"请选择","popper-append-to-body":!1},on:{change:e.syncDirectionChange},model:{value:e.syncDirectionInfo,callback:function(t){e.syncDirectionInfo=t},expression:"syncDirectionInfo"}},e._l(e.syncDirectionList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.label,value:e.value}})})),1)],1),e.showSyncContent?t("div",{staticClass:"sync-content"},[t("div",{staticClass:"title-text sync-content__text"},[e._v("同步内容：")]),t("div",{staticClass:"sync-radio"},[t("el-radio-group",{on:{input:e.syncContentRadio},model:{value:e.syncRadio,callback:function(t){e.syncRadio=t},expression:"syncRadio"}},e._l(e.syncContent,(function(i,s){return t("el-radio",{key:s,staticClass:"sync-radio-item",attrs:{label:i.value}},[e._v(e._s(i.label))])})),1)],1)]):e._e()]),t("ul",{staticClass:"ask"},e._l(e.setRequiredList,(function(i,s){return t("li",{key:s,staticClass:"ask-item"},[e._v(e._s(s+1)+"."+e._s(i))])})),0)]),t("div",{staticClass:"t-s-footer"},[t("div",{staticClass:"cancel common",on:{click:e.close}},[e._v("取消")]),t("div",{staticClass:"confirm common",on:{click:e.confirm}},[e._v("确认")])])])])],1),t("folder-list",{attrs:{"folder-visible":e.isOpenFolder,title:e.folderModuleTitle,"is-net-disk":e.isNetDisk,"folder-list":e.folderList,"folder-loading":e.folderLoadingStatus,"prohibit-roll":e.isProhibitRoll},on:{"update:folderVisible":function(t){e.isOpenFolder=t},"update:folder-visible":function(t){e.isOpenFolder=t},"enter-sub-folder":e.enterTargetFolder,"go-back-directory":e.enterTargetFolder,"all-directory-files":e.enterTargetFolder,"delete-index":e.enterTargetFolder,"bottoming-out-load":e.bottomingOutLoad,"confirm-modal":e.confirmFolder,"close-modal":e.clearFolderData}})],1)}),[],!1,null,"0574d667",null).exports},2210:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return L}});i(7658);var s=i(408),o=i(2145),a=i(3812),l=i(5017),r=i(4738),n=i(8071),d=i(1579),c=i.n(d);let h=null;var m={props:{},data(){return{pageNum:1,pageSize:20,isIndeterminate:!1,checkAll:!1,checkedFiles:[],moveRemoveFiles:[],directoryHierarchy:[],pathList:[],netDiskFileTitle:l.aK,netDiskFileIcon:l.aE,netDiskFileButtons:l.Lf,isShowModule:!1,moduleType:0,isShowTask:!1,filesHeight:0,timer:null,isDlModule:!1,waitDownloadFsIds:[],isCurrentDirectory:!1,waitUploadFile:{},echoNetDiskFolder:"请选择网盘文件夹",echoStagingNetDisk:{},folderNum:0,moveEnterFileName:!1,isShowShare:!1,clipBoardText:"",isShowWrite:!1,isGlobalDownload:!1}},computed:{...(0,s.Se)({getFilesList:"filesListStore/getFilesList",getCurrentFilesListFsIds:"filesListStore/getCurrentFilesListFsIds",getProhibitRoll:"filesListStore/getProhibitRoll",getFilesLoading:"filesListStore/getFilesLoading",getNVip:"userStore/getNVip",getsVip:"userStore/getsVip",getShowIndexModule:"filesListStore/getShowIndexModule",getResidue:"netDiskCapacityStore/getResidue"}),getImg(){return e=>`${i(2466)(`./${e}.svg`)}`},getIsDir(){let e=!0;if(0===this.checkedFiles.length)return e;for(const t of this.checkedFiles)for(const i of this.getFilesList)if(t===i.fs_id&&0===i.isdir){e=!1;break}return e}},watch:{},filters:{},created(){},mounted(){(0,a.Z)()&&(0,o.Z)()&&this.initUserInfo();try{this.filesHeight=document.body.clientHeight-162}catch{}this.queryFilesList({params:{dir:"/",web:1,order:"time",desc:1,page:this.pageNum,num:this.resizePageSize()},isRoll:!1})},beforeDestroy(){},methods:{...(0,s.nv)({queryFilesList:"filesListStore/queryFilesList",initUserInfo:"userStore/initUserInfo"}),openSharePanel(){""!==this.clipBoardText?-1!==this.clipBoardText.indexOf("pan.baidu.com")?(this.isShowShare=!0,this.isShowWrite=!1):(0,r.y)({message:"分享链接错误",type:"warning"}):(0,r.y)({message:"分享链接不可为空",type:"warning"})},openWriteSharePanel(){this.isShowWrite=!0},closeShareWrite(){this.isShowWrite=!1,this.clipBoardText=""},confirmFileUnloading(e){this.$api.article.shareUnloading({shortUrl:e.link,pwd:e.code,savePanPath:"/我的资源",saveNasPath:e.path}).then((e=>{try{if(200===e.status){if(200!==e.data.code)return void(0,r.y)({message:e.data.message,type:"warning"});200===e.data.code&&(0,r.y)({message:"转存成功",type:"success"})}}catch(e){(0,r.y)({message:"转存失败",type:"error"})}})).catch((e=>{(0,r.y)({message:"转存失败",type:"error"})}))},singleCheckedFiles(e){let t=e.length;this.checkAll=t===this.getCurrentFilesListFsIds.length,this.isIndeterminate=t>0&&t<this.getCurrentFilesListFsIds.length},multipleCheckedFiles(e){this.checkedFiles=e?this.getCurrentFilesListFsIds:[],this.isIndeterminate=!1},mouseenterImg(e){n.Z.$emit("clearFloatTimeout"),this.moveRemoveFiles=[e]},mouseleaveImg(){this.moveRemoveFiles=[]},mouseenterFsId(e){let t=this;0!==this.getFilesList.length&&(this.timer=setTimeout((()=>{try{this.moveEnterFileName=!0,t.getFilesList[e].isFloat=1}catch(e){}}),1e3))},mouseleaveFsId(e){try{0!==this.getFilesList.length&&(clearTimeout(this.timer),this.moveEnterFileName=!1,1===this.getFilesList[e].isFloat&&(this.getFilesList[e].isFloat=2))}catch(e){}},clickEnterBelowFolder(e){clearTimeout(h);let t=this;h=setTimeout((function(){if(-1!==t.checkedFiles.indexOf(e.fs_id)){if(0===t.checkedFiles.length)return t.checkedFiles=[],void t.singleCheckedFiles([]);let i=[];for(const s of c().cloneDeep(t.checkedFiles))e.fs_id!==s&&i.push(s);t.checkedFiles=i}else t.checkedFiles.push(e.fs_id);t.singleCheckedFiles(t.checkedFiles)}),300)},dblClickEnterBelowFolder(e){clearTimeout(h),this.enterBelowFolder(e)},enterBelowFolder(e){if(0===e.isdir)return;this.pageNum=1,this.pageSize=this.resizePageSize(),this.$store.commit("filesListStore/SET_PROHIBIT_ROLL",!1),this.clearFilesData();let t=e.path.split("/"),i=this.directoryHierarchy.concat(t[t.length-1]),s=this.pathList.concat(e.path);this.directoryHierarchy=i,this.pathList=s,this.$store.commit("filesListStore/SET_FILES_LIST",[]),this.queryFilesList({params:{dir:e.path,web:1,order:"time",desc:1,page:this.pageNum,num:this.resizePageSize()},isRoll:!1}),document.querySelector(".body-ul").scrollTop=0},goBackUpperDirectory(){0!==this.directoryHierarchy.length&&0!==this.pathList.length&&(this.pageNum=1,this.pageSize=this.resizePageSize(),this.$store.commit("filesListStore/SET_PROHIBIT_ROLL",!1),this.clearFilesData(),this.$store.commit("filesListStore/SET_FILES_LIST",[]),1===this.directoryHierarchy.length?(this.directoryHierarchy=[],this.pathList=[],this.queryFilesList({params:{dir:"/",web:1,order:"time",desc:1,page:this.pageNum,num:this.resizePageSize()},isRoll:!1})):(this.directoryHierarchy.pop(),this.pathList.pop(),this.queryFilesList({params:{dir:this.pathList[this.pathList.length-1],web:1,order:"time",desc:1,page:this.pageNum,num:this.resizePageSize()},isRoll:!1})),document.querySelector(".body-ul").scrollTop=0)},wholeDirectoryFiles(){this.pageNum=1,this.pageSize=this.resizePageSize(),this.$store.commit("filesListStore/SET_PROHIBIT_ROLL",!1),this.clearFilesData(),this.directoryHierarchy=[],this.pathList=[],this.$store.commit("filesListStore/SET_FILES_LIST",[]),this.queryFilesList({params:{dir:"/",web:1,order:"time",desc:1,page:this.pageNum,num:this.resizePageSize()},isRoll:!1}),document.querySelector(".body-ul").scrollTop=0},deleteTargetIndex(e){this.pageNum=1,this.pageSize=this.resizePageSize(),this.$store.commit("filesListStore/SET_PROHIBIT_ROLL",!1),this.clearFilesData(),e!==this.directoryHierarchy.length-1?(this.directoryHierarchy.splice(e+1,this.directoryHierarchy.length-1),this.$store.commit("filesListStore/SET_FILES_LIST",[]),this.queryFilesList({params:{dir:this.pathList[e],web:1,order:"time",desc:1,page:this.pageNum,num:this.resizePageSize()},isRoll:!1}),this.pathList.splice(e+1,this.pathList.length-1),document.querySelector(".body-ul").scrollTop=0):(0,r.y)({message:"当前已在该目录下",type:"warning"})},bottomingListOutLoad(e){if(this.getProhibitRoll||this.getFilesLoading)return;let t=e.target.scrollHeight,i=e.target.clientHeight,s=e.target.scrollTop;(t-(s+i)==0||t-(s+i)<10)&&(this.pageNum=this.pageNum+1,this.pageSize=this.resizePageSize(),this.queryFilesList({params:{dir:0===this.pathList.length?"/":this.pathList[this.pathList.length-1],web:1,order:"time",desc:1,page:this.pageNum,num:this.resizePageSize()},isRoll:!0,successCallback:this.outLoadCallback}))},outLoadCallback(e){0!==this.checkedFiles.length&&0!==e.length&&(this.isIndeterminate=!0,this.checkAll=!1)},clearFilesData(){this.checkedFiles=[],this.moveRemoveFiles=[],this.isIndeterminate=!1,this.checkAll=!1},searchFiles(){},uploadCurrentFolder(){this.isCurrentDirectory=!0,this.openFilesList()},switchOptions(e){this.isCurrentDirectory=e.isCurrent,this.openFilesList()},appointPathUpload(){this.waitUploadFile.isCheckBox?this.uploadFiles(this.waitUploadFile):this.uploadSingleFiles({params:[{path:this.waitUploadFile.path,filesize:this.waitUploadFile.size,isDir:this.waitUploadFile.isDir}],size:this.waitUploadFile.size,netDiskPath:l.se}),this.closeModule()},openFilesList(){this.isNetDisk=!1,this.folderModuleTitle="选择飞牛文件",this.isSeparateFolder=!1,this.isOpenFolder=!0,this.newSynologyFolder({device_id:this.getDeviceId,path:"/",fs_id:0,start:0,limit:50})},confirmUploadFiles(e){return this.isCurrentDirectory&&0===this.getNVip?(this.moduleType=0,this.isShowModule=!0,this.isCurrentDirectory=!1,void(this.waitUploadFile=e)):e.size>=4294967296&&0===this.getNVip&&(0===this.getsVip||1===this.getsVip)?(this.moduleType=1,this.isShowModule=!0,void(this.isCurrentDirectory=!1)):e.size>=322122547200&&0===this.getNVip&&2===this.getsVip?(this.moduleType=2,this.isShowModule=!0,void(this.isCurrentDirectory=!1)):void(e.isCheckBox?this.uploadFiles(e):this.uploadSingleFiles({params:[{path:e.path,filesize:e.size,isDir:e.isDir}],size:e.size,netDiskPath:this.isCurrentDirectory?0===this.pathList.length?"/":this.pathList[this.pathList.length-1]:l.se}))},uploadFiles(e){let t=[];for(const i of e.list)t.push({path:i.path,filesize:i.size,isDir:i.isDir});this.uploadSingleFiles({params:t,size:e.size,netDiskPath:this.isCurrentDirectory?0===this.pathList.length?"/":this.pathList[this.pathList.length-1]:l.se})},uploadSingleFiles(e){if(this.getResidue<e.size)return void(0,r.y)({message:"网盘空间不足",type:"warning"});let t={pathList:e.params,autoSync:0,targetPath:e.netDiskPath};this.$api.article.createUploadTask(t).then((t=>{try{if(200===t.status){if(200!==t.data.code)return void(0,r.y)({message:t.data.message,type:"error"});200===t.data.code&&(0===this.getNVip?(this.$store.commit("messageStore/SET_MES_TIPS",!0),this.$store.commit("messageStore/SET_MES_TEXT",`已添加${e.params.length}项至上传列表，开通NAS会员尊享自动同步`)):(0,r.y)({message:`已添加${e.params.length}项至上传列表`,type:"success"}))}}catch(e){(0,r.y)({message:"上传失败",type:"error"})}})).catch((e=>{(0,r.y)({message:"上传失败",type:"error"})}))},openNasTipsModule(){this.moduleType=3,this.isShowModule=!0},downloadFile(e){this.waitDownloadFsIds=[e.fs_id],this.isGlobalDownload=!1,this.isDlModule=!0},confirmDownload(e){this.$store.commit("filesListStore/SET_FILES_LOADING",!0);let t={fsIds:JSON.stringify(this.waitDownloadFsIds),savePath:e,autoSync:0};this.$api.article.createDownload(t).then((e=>{try{if(200===e.status){if(200!==e.data.code)return this.$store.commit("filesListStore/SET_FILES_LOADING",!1),this.waitDownloadFsIds=[],void(0,r.y)({message:e.data.message,type:"error"});200===e.data.code&&(this.$store.commit("filesListStore/SET_FILES_LOADING",!1),0===this.getNVip?(this.$store.commit("messageStore/SET_MES_TIPS",!0),this.$store.commit("messageStore/SET_MES_TEXT",`已添加${this.waitDownloadFsIds.length}项至下载列表，开通NAS会员尊享自动同步`)):(0,r.y)({message:`已添加${this.waitDownloadFsIds.length}项至下载列表`,type:"success"}),this.isGlobalDownload&&(this.checkedFiles=[],this.checkAll=!1,this.isIndeterminate=!1),this.waitDownloadFsIds=[],this.waitDownloadFsIds="",this.isGlobalDownload=!1)}}catch(e){this.$store.commit("filesListStore/SET_FILES_LOADING",!1),(0,r.y)({message:"下载失败",type:"error"}),this.waitDownloadFsIds=[],this.waitDownloadFsIds="",this.isGlobalDownload=!1}})).catch((e=>{this.$store.commit("filesListStore/SET_FILES_LOADING",!1),(0,r.y)({message:"下载失败",type:"error"}),this.waitDownloadFsIds=[],this.waitDownloadFsIds="",this.isGlobalDownload=!1}))},synchronousFile(e){if(0===this.getNVip)return this.moduleType=4,void(this.isShowModule=!0);this.echoStagingNetDisk={path:e.path,size:e.size,isNetDisk:!1,fs_id:e.fs_id,isDir:e.isdir},this.echoNetDiskFolder=e.path,this.isShowTask=!0},globalDownloadFile(){0!==this.checkedFiles.length?(this.waitDownloadFsIds=this.checkedFiles,this.isGlobalDownload=!0,this.isDlModule=!0):(0,r.y)({message:"请先勾选目标文件",type:"warning"})},globalSynchronousFile(){if(0!==this.checkedFiles.length)for(const e of this.getFilesList)e.fs_id===Number(this.checkedFiles[0])&&this.synchronousFile(e);else(0,r.y)({message:"请先勾选目标文件",type:"warning"})},closeModule(){this.isShowModule=!1,this.$emit("update:isShowModule",!1),this.moduleType=-1,this.waitUploadFile={},this.isGlobalDownload=!1},activateMembership(){this.closeModule(),this.openNasMember()},newSyncTask(e){this.$store.commit("filesListStore/SET_FILES_LOADING",!0);let t={isTransfer:e.syncRadio,nasPath:e.synologyFolder,panPath:e.netDiskFolder,syncStatus:e.syncDirection,uploadWork:{pathList:[{path:e.synologyFolder,filesize:e.synologySize,isDir:e.isdir}],autoSync:1,targetPath:e.netDiskFolder},downloadWork:{fsIds:JSON.stringify([Number(e.netDiskFsId)]),savePath:e.synologyFolder,autoSync:1}};this.$api.article.createAutoSyncTask(t).then((e=>{try{if(200===e.status){if(200!==e.data.code)return this.$store.commit("filesListStore/SET_FILES_LOADING",!1),void(0,r.y)({message:e.data.message,type:"warning"});200===e.data.code&&(this.$store.commit("filesListStore/SET_FILES_LOADING",!1),(0,r.y)({message:"新建任务成功",type:"success"}),this.$router.push({path:"/autosync"}))}}catch(e){this.$store.commit("filesListStore/SET_FILES_LOADING",!1),(0,r.y)({message:"新建任务失败",type:"error"})}})).catch((e=>{this.$store.commit("filesListStore/SET_FILES_LOADING",!1),(0,r.y)({message:"新建任务失败",type:"error"})}))},resizePageSize(){let e=20;try{return document.body.clientHeight>900&&(e=50),document.body.clientHeight>1200&&(e=80),document.body.clientHeight>1600&&(e=100),e}catch(t){return e}}}},u=i(4288),g=i(3723),p=i(9959);var v={name:"FloatMore",mixins:[{props:{isMore:{type:Boolean,default:!0},isNas:{type:Boolean,default:!1},title:{type:String,default:""},moreList:{type:Array,default:()=>[]},showIndex:{type:Array,default:()=>[0,1]}},data(){return{isShowMore:!1}},computed:{},watch:{},filters:{},created(){},mounted(){},beforeDestroy(){},methods:{mouseenterMore(){(this.isMore||this.isNas)&&(this.isShowMore=!0)},mouseleaveMore(){(this.isMore||this.isNas)&&(this.isShowMore=!1)},handleChange(){this.isMore&&!this.isNas||this.$emit("handle-change",this.moreData)},switchOptionsChange(e){this.isShowMore=!1,this.$emit("switch-options",e)}}}],components:{}},y=i(1001),f=(0,y.Z)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"float-more",on:{mouseenter:e.mouseenterMore,mouseleave:e.mouseleaveMore}},[t("div",{staticClass:"more-title",on:{click:e.handleChange}},[e._v(e._s(e.title))]),t("div",{staticClass:"space"}),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.isMore&&e.isShowMore&&!e.isNas,expression:"isMore && isShowMore && !isNas"}],staticClass:"more-ul"},e._l(e.moreList,(function(i,s){return t("li",{directives:[{name:"show",rawName:"v-show",value:-1!==e.showIndex.indexOf(i.index),expression:"showIndex.indexOf(item.index) !== -1"}],key:s,staticClass:"more-li",on:{click:function(t){return e.switchOptionsChange(i)}}},[t("div",{staticClass:"li-left"},[t("div",{staticClass:"left-top"},[e._v(e._s(i.label))]),t("div",{staticClass:"left-bottom"},[e._v(e._s(i.subsidiary))])]),t("el-image",{directives:[{name:"show",rawName:"v-show",value:i.icon,expression:"item.icon"}],attrs:{src:i.icon}})],1)})),0)])}),[],!1,null,"30db8cc6",null).exports,F=i(3462),w=i(5675);var S={props:{dlVisible:{type:Boolean,default:!1}},data(){return{dialogVisible:!1,downloadsPath:""}},computed:{...(0,s.Se)({getNVip:"userStore/getNVip",getDlPath:"filesListStore/getDlPath"})},watch:{dlVisible(e){this.dialogVisible=this.dlVisible,e&&this.initDlPath()}},filters:{},created(){},mounted(){},beforeDestroy(){},methods:{initDlPath(){this.$api.article.createDownloadPath().then((e=>{try{if(200===e.status&&200===e.data.code)return this.$store.commit("filesListStore/SET_DOWNLOAD_PATH",e.data.data+"/来自：百度网盘"),void(this.downloadsPath=e.data.data+"/来自：百度网盘");(0,r.y)({message:e.data.message,type:"warning"})}catch(e){(0,r.y)({message:"下载地址获取失败",type:"warning"})}})).catch((e=>{(0,r.y)({message:"下载地址获取失败",type:"warning"})}))},interceptPath(){if(""===this.downloadsPath)return"";let e="",t=c().cloneDeep(this.downloadsPath).split("/");return-1!==t.indexOf("sdkpath")?(t.splice(1,1),e=t.join("/"),e):this.downloadsPath},openFolderList(){this.isNetDisk=!1,this.folderModuleTitle="保存到 飞牛",this.isOpenFolder=!0,this.newSynologyFolder({device_id:this.getDeviceId,path:"/",fs_id:0,start:0,limit:50})},close(){this.$emit("update:dlVisible",!1),this.$emit("close-modal"),this.downloadsPath=this.getDlPath},confirm(){""!==this.downloadsPath?(this.$emit("update:dlVisible",!1),this.$emit("confirm-modal",this.downloadsPath),this.downloadsPath=this.getDlPath):(0,r.y)({message:"下载地址不可为空",type:"warning"})},downloadFolder(e){this.clearFolderData(),e.isNetDisk||(this.downloadsPath=e.path)}}},k=i(4575),_={name:"DlModule",mixins:[S,g.Z],components:{folderList:k.Z}},D=(0,y.Z)(_,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"dl-content"},[t("div",{staticClass:"dl-module"},[t("el-dialog",{attrs:{title:"下载",visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[t("div",{staticClass:"content-dialog"},[t("div",{staticClass:"dl-body"},[t("div",{staticClass:"dl-view"},[t("div",{staticClass:"view-left"},[t("div",{staticClass:"view-left__text"},[e._v("下载到:")]),t("div",{staticClass:"view-left__input"},[e._v(e._s(e.interceptPath()))])]),t("div",{staticClass:"view-right",on:{click:e.openFolderList}},[t("div",{staticClass:"view-right__text"},[e._v("更改")])])])]),t("div",{staticClass:"dl-footer"},[t("div",{staticClass:"cancel common",on:{click:e.close}},[e._v("取消")]),t("div",{staticClass:"confirm common",on:{click:e.confirm}},[e._v("确认")])])])])],1),t("folder-list",{attrs:{"folder-visible":e.isOpenFolder,title:e.folderModuleTitle,"is-net-disk":e.isNetDisk,"folder-list":e.folderList,"folder-loading":e.folderLoadingStatus,"prohibit-roll":e.isProhibitRoll},on:{"update:folderVisible":function(t){e.isOpenFolder=t},"update:folder-visible":function(t){e.isOpenFolder=t},"enter-sub-folder":e.enterTargetFolder,"go-back-directory":e.enterTargetFolder,"all-directory-files":e.enterTargetFolder,"delete-index":e.enterTargetFolder,"bottoming-out-load":e.bottomingOutLoad,"confirm-modal":e.downloadFolder,"close-modal":e.clearFolderData}})],1)}),[],!1,null,"ecc2b9b4",null).exports,N=i(4386),b=i(7852),C={name:"FilesList",mixins:[m,g.Z,u.Z],components:{shareUnloading:b.Z,folderList:k.Z,folderRouting:p.Z,floatMore:f,dialogSlot:F.Z,taskSet:w.Z,dlModule:D,floatBubble:N.Z}},L=(0,y.Z)(C,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"main-header"},[t("folder-routing",{attrs:{directoryHierarchy:e.directoryHierarchy,"max-width":120},on:{"go-back-directory-change":e.goBackUpperDirectory,"all-directory-files-change":e.wholeDirectoryFiles,"delete-directory-change":e.deleteTargetIndex}}),t("div",{staticClass:"btn-team"},[t("div",{staticClass:"right-team"},[e._l(e.netDiskFileButtons,(function(i,s){return t("float-more",{directives:[{name:"show",rawName:"v-show",value:0===e.checkedFiles.length,expression:"checkedFiles.length === 0"}],key:s,attrs:{"is-more":i.isMore,"is-nas":1===e.getNVip,title:i.title,"more-list":i.moreList,"show-index":e.getShowIndexModule},on:{"handle-change":e.uploadCurrentFolder,"switch-options":e.switchOptions}})})),t("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.checkedFiles.length,expression:"checkedFiles.length !== 0"}],staticClass:"right-btn"},[t("div",{class:[e.checkedFiles.length>1||!e.getIsDir?"files":"","item-btn-l-r l-btn"],on:{click:e.globalDownloadFile}},[t("div",{staticClass:"item-btn"},[e._v("下载文件至NAS")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedFiles.length<=1&&e.getIsDir,expression:"checkedFiles.length <= 1 && getIsDir"}],staticClass:"vertical-line"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedFiles.length<=1&&e.getIsDir,expression:"checkedFiles.length <= 1 && getIsDir"}],staticClass:"item-btn-l-r r-btn"},[t("div",{staticClass:"item-btn btn-r",on:{click:e.globalSynchronousFile}},[e._v("创建自动同步任务")]),t("el-image",{attrs:{src:i(2234)}})],1)])],2),t("div",{staticClass:"left-team"},[t("div",{staticClass:"left-btn",on:{click:e.openWriteSharePanel}},[t("el-image",{attrs:{src:i(2437)}}),t("div",{staticClass:"left-btn__text"},[e._v("保存网盘外链文件")])],1)])])],1),t("div",{staticClass:"main-body"},[t("div",{staticClass:"body-content"},[t("div",{staticClass:"content-title"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.multipleCheckedFiles},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.checkedFiles.length,expression:"checkedFiles.length === 0"}],staticClass:"content-title__text"},[e._v("全选")]),t("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.checkedFiles.length,expression:"checkedFiles.length !== 0"}],staticClass:"content-title__text"},[e._v("已选择 "+e._s(e.checkedFiles.length)+" 项")])],1),t("div",{staticClass:"content-view"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.getFilesLoading,expression:"getFilesLoading"}],staticClass:"table",style:{height:e.filesHeight+"px"}},[t("ul",{staticClass:"table-title"},e._l(e.netDiskFileTitle,(function(i,s){return t("li",{key:s,staticClass:"title-li",style:{width:i.width}},[t("div",{staticClass:"text-dis inline-block-v-middle content"},[e._v(e._s(i.title))])])})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.getFilesList.length,expression:"getFilesList.length !== 0"}],staticClass:"table-body"},[t("el-checkbox-group",{on:{change:e.singleCheckedFiles},model:{value:e.checkedFiles,callback:function(t){e.checkedFiles=t},expression:"checkedFiles"}},[t("ul",{staticClass:"body-ul",on:{scroll:function(t){return e.bottomingListOutLoad(t)}}},e._l(e.getFilesList,(function(s,o){return t("li",{key:o,class:[e.moveRemoveFiles.indexOf(s.fs_id)>-1?"is-show-input":"",e.checkedFiles.indexOf(s.fs_id)>-1?"is-checked-input":"","body-li"],on:{mouseenter:function(t){return e.mouseenterImg(s.fs_id)},mouseleave:function(t){return e.mouseleaveImg()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.clickEnterBelowFolder(s)},dblclick:function(t){return t.stopPropagation(),t.preventDefault(),e.dblClickEnterBelowFolder(s)}}},[t("el-checkbox",{attrs:{label:s.fs_id}},[t("div",{staticClass:"li-view"},[t("div",{staticClass:"view-first"},[t("div",{class:[e.moveRemoveFiles.indexOf(s.fs_id)>-1?"first-left-width":"","first-left"]},[t("el-image",{attrs:{src:1===s.isdir?i(9043):e.netDiskFileIcon[s.category]}}),t("div",{staticClass:"first-left__text",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.enterBelowFolder(s)},mouseenter:function(t){return e.mouseenterFsId(o)},mouseleave:function(t){return e.mouseleaveFsId(o)}}},[e._v(e._s(s.server_filename))]),e.moveRemoveFiles.indexOf(s.fs_id)>-1&&e.moveEnterFileName?t("div",{staticClass:"float-more-name"},[t("div",{staticClass:"float-more-name__text"},[e._v(" "+e._s(s.server_filename)+" ")])]):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.moveRemoveFiles.indexOf(s.fs_id)>-1,expression:"moveRemoveFiles.indexOf(item.fs_id) > -1"}],staticClass:"first-right"},[t("float-bubble",{staticClass:"right-img",attrs:{"float-text":"下载"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.downloadFile(s)}}},[t("el-image",{attrs:{src:e.getImg("download")}})],1)]},proxy:!0}],null,!0)}),t("float-bubble",{directives:[{name:"show",rawName:"v-show",value:1===s.isdir,expression:"item.isdir === 1"}],staticClass:"right-img",attrs:{"float-text":"同步"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.synchronousFile(s)}}},[t("el-image",{attrs:{src:e.getImg("sync")}})],1)]},proxy:!0}],null,!0)})],1)]),t("div",{staticClass:"view-second"},[t("div",{staticClass:"view-second__text"},[e._v(" "+e._s(e._f("moment")(1e3*s.server_mtime,"YYYY-MM-DD HH:mm:ss"))+" ")])]),t("div",{staticClass:"view-third"},[t("div",{directives:[{name:"show",rawName:"v-show",value:0===s.isdir,expression:"item.isdir === 0"}],staticClass:"view-third__text"},[e._v(e._s(e.changeSize(s.size)))]),t("div",{directives:[{name:"show",rawName:"v-show",value:1===s.isdir,expression:"item.isdir === 1"}],staticClass:"view-third__text"},[e._v("-")])])])])],1)})),0)])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.getFilesList.length,expression:"getFilesList.length === 0"}],staticClass:"no-data"},[t("div",{staticClass:"seat"},[t("el-image",{attrs:{src:i(6257)}}),t("div",{staticClass:"seat__text"},[e._v("当前列表为空，上传你的第一个文件吧")])],1)])])])])]),t("share-unloading",{attrs:{"unloading-visible":e.isShowShare,"share-link":e.clipBoardText},on:{"update:unloadingVisible":function(t){e.isShowShare=t},"update:unloading-visible":function(t){e.isShowShare=t},"confirm-modal":e.confirmFileUnloading}}),t("dialog-slot",{attrs:{visible:e.isShowWrite,title:"保存网盘外链文件","is-open-vip":!1,"is-default-btn":!1},on:{"update:visible":function(t){e.isShowWrite=t},"close-modal":e.closeShareWrite},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"share-write"},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请将分享链接粘贴在此处"},model:{value:e.clipBoardText,callback:function(t){e.clipBoardText=t},expression:"clipBoardText"}}),t("div",{staticClass:"write-btn"},[t("div",{staticClass:"write-btn__text",on:{click:e.openSharePanel}},[e._v("下一步")])])],1)]},proxy:!0}])}),t("task-set",{attrs:{"task-visible":e.isShowTask,"net-disk-folder":e.echoNetDiskFolder,"staging-net-disk":e.echoStagingNetDisk},on:{"update:taskVisible":function(t){e.isShowTask=t},"update:task-visible":function(t){e.isShowTask=t},"confirm-modal":e.newSyncTask}}),t("dl-module",{attrs:{"dl-visible":e.isDlModule},on:{"update:dlVisible":function(t){e.isDlModule=t},"update:dl-visible":function(t){e.isDlModule=t},"open-member":e.openNasTipsModule,"confirm-modal":e.confirmDownload}}),t("dialog-slot",{attrs:{visible:e.isShowModule},on:{"update:visible":function(t){e.isShowModule=t},"close-modal":e.closeModule,"confirm-modal":e.activateMembership},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.moduleType,expression:"moduleType === 0"}],staticClass:"no-permission"},[t("div",{staticClass:"p-text"},[e._v("不支持自定义文件夹，成为NAS会员尊享上传到任意文件夹")]),t("div",{staticClass:"p-footer"},[t("div",{staticClass:"f-left"},[e._v("指定文件夹：/来自：飞牛私有云")]),t("div",{staticClass:"f-right",on:{click:e.appointPathUpload}},[e._v("上传至指定文件夹")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:1===e.moduleType,expression:"moduleType === 1"}],staticClass:"ordinary-no-upload"},[t("div",{staticClass:"u-top"},[e._v("上传大小超过限制，成为NAS会员尊享2T单文件上传")]),t("div",{staticClass:"u-bottom"},[e._v("单文件上传限制4G，小于4G的文件可正常上传")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.moduleType,expression:"moduleType === 2"}],staticClass:"vip-no-upload"},[t("div",{staticClass:"u-top"},[e._v("上传大小超过限制，成为NAS会员尊享2T单文件上传")]),t("div",{staticClass:"u-bottom"},[e._v("单文件上传限制300G，小于300G的文件可正常上传")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:3===e.moduleType,expression:"moduleType === 3"}],staticClass:"btn-update"},[t("div",[e._v("不支持自定义文件夹，成为NAS会员可修改下载文件夹")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:4===e.moduleType,expression:"moduleType === 4"}],staticClass:"no-synchronize-tasks"},[t("div",[e._v("不支持创建自动同步任务，成为NAS会员尊享自动同步")])])]},proxy:!0}])}),t("folder-list",{attrs:{"folder-visible":e.isOpenFolder,"is-check-box":!0,title:e.folderModuleTitle,"is-net-disk":e.isNetDisk,"folder-list":e.folderList,"folder-loading":e.folderLoadingStatus,"prohibit-roll":e.isProhibitRoll},on:{"update:folderVisible":function(t){e.isOpenFolder=t},"update:folder-visible":function(t){e.isOpenFolder=t},"enter-sub-folder":e.enterTargetFolder,"go-back-directory":e.enterTargetFolder,"all-directory-files":e.enterTargetFolder,"delete-index":e.enterTargetFolder,"bottoming-out-load":e.bottomingOutLoad,"confirm-modal":e.confirmUploadFiles,"close-modal":e.clearFolderData}})],1)}),[],!1,null,"54aed1df",null).exports},2466:function(e,t,i){var s={"./application.svg":8492,"./audio.svg":9681,"./document.svg":6649,"./download.svg":3782,"./folder.svg":9043,"./img.svg":8731,"./other.svg":8211,"./seed.svg":8734,"./sync.svg":1434,"./video.svg":8048};function o(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=a,e.exports=o,o.id=2466},6257:function(e,t,i){"use strict";e.exports=i.p+"img/no-data.243f57f2.svg"},2437:function(e,t,i){"use strict";e.exports=i.p+"img/share_icon.ea17f520.svg"},3782:function(e,t,i){"use strict";e.exports=i.p+"img/download.8cc8a0dc.svg"},1434:function(e,t,i){"use strict";e.exports=i.p+"img/sync.55238a53.svg"}}]);